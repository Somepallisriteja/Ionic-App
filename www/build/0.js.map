{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAyC;AAEP;AAUlC;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAR1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE,EAER;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACZe;AACgC;AAG3C;AAGqB;AACO;AAEnB;AACxC,wDAAwD;AACxD,uCAAuC;AAWvC;IAOC;wDACoD;IACnD,kBAAmB,OAAsB,EAChC,SAAoB;QAC5B,2BAA2B;QAElB,MAAuB,EACvB,UAA+B,EAChC,SAA0B;QAClC;0CACkC;;QARhB,YAAO,GAAP,OAAO,CAAe;QAChC,cAAS,GAAT,SAAS,CAAW;QAGnB,WAAM,GAAN,MAAM,CAAiB;QACvB,eAAU,GAAV,UAAU,CAAqB;QAChC,cAAS,GAAT,SAAS,CAAiB;QAXnC,YAAO,GAAG,EAAa;QAiBrB,iBAAiB;QACnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAyEK;IACP,CAAC;IAaD;;;;;;MAME;IAGF,gCAAa,GAAb;QAAA,iBAWC;QARA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,cAAI;YAC1C,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,aAAW,IAAI,CAAC,GAAK,CAAC,CAAC,GAAG,CAAC,KAAI,CAAC,OAAO,CAAC;iBAC9D,IAAI,CAAC,cAAK,YAAI,CAAC,OAAO,CAAC,OAAO,CAAC,4DAAQ,CAAC,EAA9B,CAA8B,CAAC,CAAC;QAG5C,CAAC,CAAC;IAGJ,CAAC;IAjIY,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;6EAUyC;YACrB,0EAAS;YAGX,kFAAe;YACX,sEAAmB;YACrB,eAAe;YAClC;UACkC;;OAjBxB,QAAQ,CAoIpB;IAAD,CAAC;AAAA;SApIY,QAAQ,e","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n   // IonicPageModule.forChild(HomePage),\n  ],\n})\nexport class HomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\n\n\nimport 'rxjs/add/operator/map';\n\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { AngularFireDatabase} from 'angularfire2/database';\nimport { Profile } from '../../models/profile';\nimport { TabsPage } from '../tabs/tabs';\n//import { FcmProvider } from '../../providers/fcm/fcm';\n//import { tap } from 'rxjs/operators';\n\n\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n})\nexport class HomePage {\n\n  dataToAdd;\n\n  profile = {} as Profile\n\n\n /*firestore =  firebase.database().ref('/pushtokens');\n  firemsg = firebase.database().ref('/messages');  */\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n   //public fcm : FcmProvider,\n \n    private afAuth: AngularFireAuth,\n    private afDatabase: AngularFireDatabase,\n    public toastCtrl: ToastController\n   /* private platform: Platform\n    public afd: AngularFireDatabase*/\n  ) {\n\n\n    //Get a FCM token\n  /* this.fcm.getToken()\n  \n   this.fcm.listenToNotifications().pipe(\n\n    tap(msg =>{\n      const toast = this.toastCtrl.create({\n         message: msg.body,\n         duration: 3000\n\n      });\n       toast.present();\n    })\n   )\n   .subscribe()\n  this.tokensetup().then((token) =>{\n    this.storetoken(token);\n  }); \n  this.onNotification();\n  }\n\n\n  async onNotification(){\n   await this.platform.ready();\n   FCMPlugin.onNotification((data)=>{\n     console.log(data);\n   }, (error)=> console.error(error));\n  }\n  catch(e){\n    console.error(e);\n  }\n    /*ionViewDidLoad(){\n    FCMPlugin.onNotification(function(data){\n      if(data.wasTapped){\n        //Notification was received on device tray and tapped by the user.\n        alert( JSON.stringify(data) );\n      }else{\n        //Notification was received in foreground. Maybe the user needs to be notified.\n        alert( JSON.stringify(data) );\n      }\n  });\n  FCMPlugin.onTokenRefresh(function(token){\n    alert( token );\n});\n  }\n  tokensetup(){\n    var promise = new promise((resolve, reject) =>{\n      FCMPlugin.getToken(function(token){\n        resolve(token);\n    }, (err) =>{\n      reject(err);\n    });\n\n    })\n    return promise;\n  }\n  storetoken(t){\n   this.afd.list(this.firestore).push({\n     uid: firebase.auth().currentUser.uid,\n     devtoken: t\n   }). then(() =>{\n     alert('Token stored');\n   }).catch(()=>{\n     alert('Token not stored');\n   })\n\n   this.afd.list(this.firemsg).push({\n     sendername: firebase.auth().currentUser.displayName,\n     message: 'Hello'\n   }).then(()=>{\n     alert('Message stored');\n   }).catch(()=>{\n     alert('Message not stored');\n   })\n  }  */\n}\n\n\n \n \n\n  \n\n\n\n\n\n\n/*callPostService(name, city){\n let p = this.networkprovider.callPost(name, city)\n .then(data =>{\n   console.log(\"recieved\" + JSON.stringify(data.json().data));\n });\n} \n*/\n\n\ncreateProfile(){\n\n  \n this.afAuth.authState.take(1).subscribe(auth => {\n   this.afDatabase.object(`profile/${auth.uid}`).set(this.profile)\n   .then(()=> this.navCtrl.setRoot(TabsPage));\n   \n   \n  }) \n  \n\n}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}